<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>首页 - 部署 | Ming&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <script src="https://cdn.staticfile.org/twikoo/1.6.7/twikoo.all.min.js"></script>
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?267c5680c2ffb468ca29c45ffe6801da"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="web前端技术博客, VuePress搭建, 使用了 Vdoing 主题,专注web前端学习与总结。学习JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Young Kbt个人博客, VuePress搭建, 学习Java、Web、框架、微服务、工具、前端等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.57beb9dd.css" as="style"><link rel="preload" href="/assets/js/app.9ce89328.js" as="script"><link rel="preload" href="/assets/js/2.f5951ee7.js" as="script"><link rel="preload" href="/assets/js/109.bb88a410.js" as="script"><link rel="preload" href="/assets/js/15.8f34ae65.js" as="script"><link rel="preload" href="/assets/js/5.80fa8520.js" as="script"><link rel="preload" href="/assets/js/9.a3a07a71.js" as="script"><link rel="preload" href="/assets/js/8.00efa629.js" as="script"><link rel="prefetch" href="/assets/js/10.01f08460.js"><link rel="prefetch" href="/assets/js/100.67cdec04.js"><link rel="prefetch" href="/assets/js/101.0179f79a.js"><link rel="prefetch" href="/assets/js/102.193ab642.js"><link rel="prefetch" href="/assets/js/103.adb7b3ef.js"><link rel="prefetch" href="/assets/js/104.bb50b48e.js"><link rel="prefetch" href="/assets/js/105.9b0076e6.js"><link rel="prefetch" href="/assets/js/106.810351da.js"><link rel="prefetch" href="/assets/js/107.770b25d4.js"><link rel="prefetch" href="/assets/js/108.4cc2b80c.js"><link rel="prefetch" href="/assets/js/11.6965dc33.js"><link rel="prefetch" href="/assets/js/110.1057d2bb.js"><link rel="prefetch" href="/assets/js/111.6976aaa5.js"><link rel="prefetch" href="/assets/js/112.091e3496.js"><link rel="prefetch" href="/assets/js/113.361d9f2b.js"><link rel="prefetch" href="/assets/js/114.5ab74754.js"><link rel="prefetch" href="/assets/js/115.a1eb5f2c.js"><link rel="prefetch" href="/assets/js/116.d25015c5.js"><link rel="prefetch" href="/assets/js/117.449026c8.js"><link rel="prefetch" href="/assets/js/118.822157f1.js"><link rel="prefetch" href="/assets/js/119.10a0c829.js"><link rel="prefetch" href="/assets/js/12.04b2320f.js"><link rel="prefetch" href="/assets/js/120.10699888.js"><link rel="prefetch" href="/assets/js/121.c637a980.js"><link rel="prefetch" href="/assets/js/122.4c9109a0.js"><link rel="prefetch" href="/assets/js/123.58026fde.js"><link rel="prefetch" href="/assets/js/124.c495d639.js"><link rel="prefetch" href="/assets/js/125.9394c1b7.js"><link rel="prefetch" href="/assets/js/126.c97b7f50.js"><link rel="prefetch" href="/assets/js/127.7f281e80.js"><link rel="prefetch" href="/assets/js/128.c95cb2f1.js"><link rel="prefetch" href="/assets/js/129.49bfff21.js"><link rel="prefetch" href="/assets/js/13.f5967695.js"><link rel="prefetch" href="/assets/js/130.d6d35cac.js"><link rel="prefetch" href="/assets/js/14.120f01ce.js"><link rel="prefetch" href="/assets/js/16.da36ec39.js"><link rel="prefetch" href="/assets/js/17.d6154bd1.js"><link rel="prefetch" href="/assets/js/18.d2e78319.js"><link rel="prefetch" href="/assets/js/19.d63bd086.js"><link rel="prefetch" href="/assets/js/20.e9ef98ac.js"><link rel="prefetch" href="/assets/js/21.69f7540a.js"><link rel="prefetch" href="/assets/js/22.a88cba2e.js"><link rel="prefetch" href="/assets/js/23.ddbc3ed5.js"><link rel="prefetch" href="/assets/js/24.8aa156d2.js"><link rel="prefetch" href="/assets/js/25.2d310d73.js"><link rel="prefetch" href="/assets/js/26.83a32a24.js"><link rel="prefetch" href="/assets/js/27.45caf8fe.js"><link rel="prefetch" href="/assets/js/28.9e25c263.js"><link rel="prefetch" href="/assets/js/29.f59ebaf6.js"><link rel="prefetch" href="/assets/js/3.a5286238.js"><link rel="prefetch" href="/assets/js/30.7a276a76.js"><link rel="prefetch" href="/assets/js/31.efca4faf.js"><link rel="prefetch" href="/assets/js/32.81d02bc9.js"><link rel="prefetch" href="/assets/js/33.162743ea.js"><link rel="prefetch" href="/assets/js/34.2cdd6ead.js"><link rel="prefetch" href="/assets/js/35.2231b486.js"><link rel="prefetch" href="/assets/js/36.84f851d4.js"><link rel="prefetch" href="/assets/js/37.b9c7b886.js"><link rel="prefetch" href="/assets/js/38.898dcd14.js"><link rel="prefetch" href="/assets/js/39.48b68a5d.js"><link rel="prefetch" href="/assets/js/4.d14eaad4.js"><link rel="prefetch" href="/assets/js/40.19416517.js"><link rel="prefetch" href="/assets/js/41.b9fc92e5.js"><link rel="prefetch" href="/assets/js/42.ce346e99.js"><link rel="prefetch" href="/assets/js/43.f188fedb.js"><link rel="prefetch" href="/assets/js/44.bb6f56d2.js"><link rel="prefetch" href="/assets/js/45.69c867be.js"><link rel="prefetch" href="/assets/js/46.3c9d28a8.js"><link rel="prefetch" href="/assets/js/47.10b373c1.js"><link rel="prefetch" href="/assets/js/48.d9e402f5.js"><link rel="prefetch" href="/assets/js/49.60a8fab4.js"><link rel="prefetch" href="/assets/js/50.81c21077.js"><link rel="prefetch" href="/assets/js/51.1cc4bb83.js"><link rel="prefetch" href="/assets/js/52.8d2cdae4.js"><link rel="prefetch" href="/assets/js/53.e570f209.js"><link rel="prefetch" href="/assets/js/54.1e06951c.js"><link rel="prefetch" href="/assets/js/55.64e72812.js"><link rel="prefetch" href="/assets/js/56.4cae741a.js"><link rel="prefetch" href="/assets/js/57.ef803625.js"><link rel="prefetch" href="/assets/js/58.1ea37da9.js"><link rel="prefetch" href="/assets/js/59.43780741.js"><link rel="prefetch" href="/assets/js/6.6e6d5e8a.js"><link rel="prefetch" href="/assets/js/60.ce437f17.js"><link rel="prefetch" href="/assets/js/61.2751887b.js"><link rel="prefetch" href="/assets/js/62.8895dde5.js"><link rel="prefetch" href="/assets/js/63.fa94ccc8.js"><link rel="prefetch" href="/assets/js/64.fa6c97a4.js"><link rel="prefetch" href="/assets/js/65.ecccf6b5.js"><link rel="prefetch" href="/assets/js/66.00e32ac7.js"><link rel="prefetch" href="/assets/js/67.38c5d4fc.js"><link rel="prefetch" href="/assets/js/68.9354682a.js"><link rel="prefetch" href="/assets/js/69.798d4c5c.js"><link rel="prefetch" href="/assets/js/7.74e99897.js"><link rel="prefetch" href="/assets/js/70.ad5d9eba.js"><link rel="prefetch" href="/assets/js/71.d8b7dd18.js"><link rel="prefetch" href="/assets/js/72.cbcd658e.js"><link rel="prefetch" href="/assets/js/73.2b2bdfbd.js"><link rel="prefetch" href="/assets/js/74.9ef8250a.js"><link rel="prefetch" href="/assets/js/75.ee74c53b.js"><link rel="prefetch" href="/assets/js/76.b3741378.js"><link rel="prefetch" href="/assets/js/77.de9d53ee.js"><link rel="prefetch" href="/assets/js/78.66cca25d.js"><link rel="prefetch" href="/assets/js/79.438142bf.js"><link rel="prefetch" href="/assets/js/80.89eb3fa4.js"><link rel="prefetch" href="/assets/js/81.4c11e07f.js"><link rel="prefetch" href="/assets/js/82.d8694b66.js"><link rel="prefetch" href="/assets/js/83.92e9cb8e.js"><link rel="prefetch" href="/assets/js/84.923e6345.js"><link rel="prefetch" href="/assets/js/85.a8975b01.js"><link rel="prefetch" href="/assets/js/86.7c63a86c.js"><link rel="prefetch" href="/assets/js/87.1b4d6359.js"><link rel="prefetch" href="/assets/js/88.8e86e14b.js"><link rel="prefetch" href="/assets/js/89.5f99d004.js"><link rel="prefetch" href="/assets/js/90.97d4e502.js"><link rel="prefetch" href="/assets/js/91.f015f724.js"><link rel="prefetch" href="/assets/js/92.c4d04cfe.js"><link rel="prefetch" href="/assets/js/93.9ab5bc13.js"><link rel="prefetch" href="/assets/js/94.c0d85f9c.js"><link rel="prefetch" href="/assets/js/95.43bed309.js"><link rel="prefetch" href="/assets/js/96.b8a54cf9.js"><link rel="prefetch" href="/assets/js/97.5357cbc5.js"><link rel="prefetch" href="/assets/js/98.4bbda207.js"><link rel="prefetch" href="/assets/js/99.e3e97233.js">
    <link rel="stylesheet" href="/assets/css/0.styles.57beb9dd.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="Ming's blog" class="logo"> <span class="site-name can-hide">Ming's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/basics/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/basics/CSS2/" class="nav-link">Css</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><a href="/javascript/" class="link-title">JS</a> <span class="title" style="display:none;">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JSbasics/" class="nav-link">基础</a></li><li class="dropdown-item"><!----> <a href="/JS-ES6/" class="nav-link">ES6</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Api" class="dropdown-title"><a href="/tool/" class="link-title">Web Api</a> <span class="title" style="display:none;">Web Api</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">Dom</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">Bom</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">axios</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">跨域</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">事件</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">存储</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Webpack/" class="nav-link">Webpack</a></li><li class="dropdown-subitem"><a href="/Vite/" class="nav-link">Vite</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Demo" class="dropdown-title"><!----> <span class="title" style="display:;">Demo</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://124.222.141.165:90/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神领物流
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://124.222.141.165:99/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  尺锤人员管理
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/feynmanLearningMethod/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/more/advanced/" class="nav-link">进阶</a></li><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/more/interview-vue/" class="nav-link">技术面</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">关于</a></li><li class="dropdown-subitem"><a href="https://vue2-admin.youngkbt.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2-Admin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navigation/" class="nav-link">导航站</a></div><div class="nav-item"><a href="/message-area/" class="nav-link">留言区</a></div> <a href="https://github.com/Ming-D-W" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://photo-album-1314189846.cos.ap-shanghai.myqcloud.com/202303171033443.png"> <div class="blogger-info"><h3>Da Wu</h3> <span>朝圣的使徒，正在走向编程的至高殿堂！</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/basics/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basics/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/basics/CSS2/" class="nav-link">Css</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS" class="dropdown-title"><a href="/javascript/" class="link-title">JS</a> <span class="title" style="display:none;">JS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JSbasics/" class="nav-link">基础</a></li><li class="dropdown-item"><!----> <a href="/JS-ES6/" class="nav-link">ES6</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Api" class="dropdown-title"><a href="/tool/" class="link-title">Web Api</a> <span class="title" style="display:none;">Web Api</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">Dom</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">Bom</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">axios</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">跨域</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">事件</a></li><li class="dropdown-item"><!----> <a href="/tool/" class="nav-link">存储</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>构建工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Webpack/" class="nav-link">Webpack</a></li><li class="dropdown-subitem"><a href="/Vite/" class="nav-link">Vite</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Demo" class="dropdown-title"><!----> <span class="title" style="display:;">Demo</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://124.222.141.165:90/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  神领物流
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://124.222.141.165:99/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  尺锤人员管理
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/more/feynmanLearningMethod/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/more/advanced/" class="nav-link">进阶</a></li><li class="dropdown-item"><!----> <a href="/more/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/more/interview-vue/" class="nav-link">技术面</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">关于</a></li><li class="dropdown-subitem"><a href="https://vue2-admin.youngkbt.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2-Admin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/navigation/" class="nav-link">导航站</a></div><div class="nav-item"><a href="/message-area/" class="nav-link">留言区</a></div> <a href="https://github.com/Ming-D-W" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于 - 自我</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于 - 本站</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>关于 - 首页</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/about/index/younngkbt/" aria-current="page" class="active sidebar-link">首页 - 部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/about/index/younngkbt/#序言" class="sidebar-link">序言</a></li><li class="sidebar-sub-header level2"><a href="/about/index/younngkbt/#首页部署" class="sidebar-link">首页部署</a></li><li class="sidebar-sub-header level2"><a href="/about/index/younngkbt/#_404部署" class="sidebar-link">404部署</a></li><li class="sidebar-sub-header level2"><a href="/about/index/younngkbt/#博客部署" class="sidebar-link">博客部署</a></li><li class="sidebar-sub-header level2"><a href="/about/index/younngkbt/#邮箱部署" class="sidebar-link">邮箱部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/about/index/younngkbt/#邮箱源码" class="sidebar-link">邮箱源码</a></li><li class="sidebar-sub-header level3"><a href="/about/index/younngkbt/#官方镜像部署" class="sidebar-link">官方镜像部署</a></li><li class="sidebar-sub-header level3"><a href="/about/index/younngkbt/#自定义镜像部署" class="sidebar-link">自定义镜像部署</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/about/index/younngkbt/#消息提示效果代码" class="sidebar-link">消息提示效果代码</a></li></ul></li><li><a href="/about/index/download/" class="sidebar-link">首页 - 下载站点</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于 - 技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于 - 随笔</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E5%85%B3%E4%BA%8E" title="分类" data-v-06225672>关于</a></li><li data-v-06225672><a href="/categories/?category=%E5%85%B3%E4%BA%8E%20-%20%E9%A6%96%E9%A1%B5" title="分类" data-v-06225672>关于 - 首页</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Ming-D-W" target="_blank" title="作者" class="beLink" data-v-06225672>Ming</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2021-12-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">首页 - 部署<span class="title-tag">原创</span></h1> <!----> <div class="theme-vdoing-content content__default"><div class="custom-block note"><p class="custom-block-title">笔记</p> <p>这里简单介绍我的首页创建过程，以及邮件功能的设计过程。</p> <div class="custom-block right"><p>2021-12-09 @Du Wu</p></div></div> <p></p><div class="table-of-contents"><ul><li><a href="#序言">序言</a></li><li><a href="#首页部署">首页部署</a></li><li><a href="#_404部署">404部署</a></li><li><a href="#博客部署">博客部署</a></li><li><a href="#邮箱部署">邮箱部署</a><ul><li><a href="#邮箱源码">邮箱源码</a></li><li><a href="#官方镜像部署">官方镜像部署</a></li><li><a href="#自定义镜像部署">自定义镜像部署</a></li></ul></li><li><a href="#消息提示效果代码">消息提示效果代码</a></li></ul></div><p></p> <h2 id="序言"><a href="#序言" class="header-anchor">#</a> 序言</h2> <p>在学习完 Nginx 的知识后，我看着 Nginx 的欢迎页面细想了很久，眼中的世界太过单调，总觉得不够好看，而且无法给我的服务器提供任何信息介绍，而周围的朋友直接是将其代理到其他页面。</p> <p>当时我就有了一些想法，替换 Nginx 的欢迎页面，将新的页面作为入口页面，介绍网站功能的同时，提供博客、项目导航入口。比如我部署的一个项目，那么在首页就会有提示，如点击跳转，这样就不必记住项目的 URL 地址，只需要记住服务器地址，那么服务器其他的内容，都汇聚于首页。</p> <p>如果你是从 Github 或者 Gitee 进入到我的博客，那么可以去看看我的服务器首页，希望不会让你失望，<a href="https://www.youngkbt.cn" target="_blank" rel="noopener noreferrer">点击跳转<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>如果你看完了下面的内容，需要我的服务器首页、404页面、邮箱功能、下载站点功能的源码，那么 <a href="https://www.youngkbt.cn/download/light/%E7%BD%91%E7%AB%99%E6%BA%90%E7%A0%81/" target="_blank" rel="noopener noreferrer">点击跳转<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="首页部署"><a href="#首页部署" class="header-anchor">#</a> 首页部署</h2> <p>首先准备好一个首页，不需要打包之类的，Nginx 的首页只是一个 index.html 加点 CSS 和 JS 文件即可，不需要像一个项目那样完整。</p> <p>利用工具连接服务器，我是用的是 <code>Xftp</code>，将其上传到 Nginx 的默认路径下。</p> <p>Nginx 的默认路径下如果你不知道，打开 Nginx 的配置文件，看 80 或者 431端口的 <code>location / { ... }</code> 里的 root 指定的路径，那就是 Nginx 的默认路径。</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211209221553.png" alt="image-20211209221550925"></p> <p>这就是我的默认路径，所以将首页以及静态文件上传到 Nginx 默认路径下。</p> <p>在本地，我的首页结构如下：</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code>.
├── index.html
│   ├── assets (静态文件目录)
│   │   ├── css（样式目录）
│   │   ├── fonts（字体目录）
│   │   ├── images（图片目录）
│   │   ├── js（JavaScript 目录）
│   ├── vendor（JavaScript 库）
│   │   ├── bootstrap
|	│	├── jquery
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上传到服务器后，因为默认路径下可能有太多文件，所以我对其分类，创建一个 static 文件夹。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>根目录
├── index.html
|—— static（静态文件目录）
│   ├── assets
│   │   ├── css（样式目录）
│   │   ├── fonts（字体目录）
│   │   ├── images（图片目录）
│   │   ├── js（JavaScript 目录）
│   ├── vendor（JavaScript 库）
│   │   ├── bootstrap
|	│	├── jquery
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>根目录，就是 <code>/usr/local/openresty/nginx/html</code> 目录。</p> <p>上传首页后，记得修改 index.html 有关 css 和 js 的引入路径，因为 Nginx 的获取资源规则和本地的不一样。</p> <p>在本地，我们在 index.html 可以这样写：（部分）</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vendor/bootstrap/css/bootstrap.min.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>assets/fonts/iconfont.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vendor/jquery/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>但是上传到 Nginx 后，我们必须在开头加上 <code>/</code>，代表 Nginx 的根目录，所以我们需要这样写：（部分）</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/static/vendor/bootstrap/css/bootstrap.min.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/static/assets/fonts/iconfont.css<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span>  <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/static/vendor/jquery/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后，访问服务器的域名，即可访问这个首页。当然，如果希望访问域名的后面再加个 <code>/home</code>，如访问 <code>https://www.youngkbt.cn/home</code> ，也能访问首页的话，需要在配置文件进行配置。</p> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>		<span class="token comment"># 431 是 https 的默认端口，80 是 http 的默认端口</span>
    <span class="token directive"><span class="token keyword">server_name</span> www.youngkbt.cn</span><span class="token punctuation">;</span>
    <span class="token comment"># ...... 其他 location</span>
    
    <span class="token directive"><span class="token keyword">location</span> /home</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">alias</span>  /usr/local/openresty/nginx/html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">index</span>  index.html</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment"># ...... 其他 location</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这里使用的是 alias 指令，因为 root 指令会把 location 后面匹配的请求拼接到目录后，而 alias 指令则会忽略 location 后匹配的请求。</p> <p>alias 指令不会忽略匹配后面的请求，如访问 <code>/home/aa</code>，则忽略 <code>/home</code>，但是把 <code>/aa</code> 拼接到目录后，但是这不影响我们访问 <code>/home</code> 就能访问到首页，这里只是介绍使用 alias 指令的特点。</p> <p><strong>JS 文件</strong></p> <p>在首页，我简单实现了 Element UI 的消息提示效果，也实现了邮箱发送功能，这里提供源码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> storageName <span class="token operator">=</span> <span class="token string">&quot;isSend&quot;</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 防止重复发送</span>
  <span class="token keyword">var</span> isSend <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;姓名不能为空，请填写&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;danger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;邮箱不能为空，请填写&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;danger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#subject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;标题不能为空，请填写&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;danger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;消息不能为空，请填写&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;danger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> email <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">&quot;true&quot;</span> <span class="token operator">||</span> isSend <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;确认要发送吗？&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          isSend <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;true&quot;</span> <span class="token operator">||</span> isSend <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;请不要重复发送消息&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;邮箱格式不正确，请填写&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;danger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取表单信息</span>
    <span class="token comment">// console.log($(&quot;#contact&quot;).serialize());  </span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">function</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/sendEmail&quot;</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#contact&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token string">'OK'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;发送消息成功&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>storageName<span class="token punctuation">)</span><span class="token punctuation">;</span>
          isSend <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;失败的原因：&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token string">&quot;发送失败，可能发送超时或消息被拦截，请稍后再重试&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;tip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 添加消息提示</span>
  <span class="token keyword">function</span> <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取最后消息提示元素的高度</span>
    <span class="token keyword">var</span> top <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.tip:last&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;data-top&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.tip:last&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;data-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果产生两个以上的消息提示，则出现在上一个提示的下面，即高度添加，否则默认 20</span>
    <span class="token keyword">var</span> lastTop <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.tip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.tip:last&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">17</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#page-wraper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;tip tip-success </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; style=&quot;top: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px&quot; data-top=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;&lt;i class=&quot;iconfont icon-dagouyouquan icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-success-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;danger&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#page-wraper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;tip tip-danger </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; style=&quot;top: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px&quot; data-top=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;&lt;i class=&quot;iconfont icon-cuowu icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-danger-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;info&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#page-wraper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;tip tip-info </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; style=&quot;top: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px&quot; data-top=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;&lt;i class=&quot;iconfont icon-info icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-info-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;warning&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#page-wraper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;tip tip-warning </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; style=&quot;top: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px&quot; data-top=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;&lt;i class=&quot;iconfont icon-gantanhao icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-warning-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 动画往下滑动</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>lastTop<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 消息提示 3 秒后隐藏并被删除</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><p>消息提示效果的 CSS 文件内容：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* 消息提示样式 */</span>
<span class="token selector">.tip</span><span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity .3s linear<span class="token punctuation">,</span>top .4s<span class="token punctuation">,</span>transform .4s<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 99999<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 15px 15px 15px 20px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ebeef5<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token property">grid-row</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip p</span><span class="token punctuation">{</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.icon</span><span class="token punctuation">{</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip-success</span>  <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #67c23a<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f9eb<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #e1f3d8<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip-success .tip-success-content</span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #67c23a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip-danger</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f56c6c<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fef0f0<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #fde2e2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip-danger .tip-danger-content</span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f56c6c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip-info</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #edf2fc<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #ebeef5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip-info .tip-info-content</span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #909399<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-warning</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #e6a23c<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fdf6ec<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #faecd8<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.tip-warning .tip-warning-content</span><span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #e6a23c<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 21px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 下面是二维码样式 */</span>
<span class="token selector">.social-tip</span><span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 170px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token selector">.square</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 7px solid <span class="token function">rgba</span><span class="token punctuation">(</span>118<span class="token punctuation">,</span> 25<span class="token punctuation">,</span> 172<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-right</span><span class="token punctuation">:</span> 7px solid transparent<span class="token punctuation">;</span>
    <span class="token property">border-left</span><span class="token punctuation">:</span> 7px solid transparent<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 36%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.social-info</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> -95%<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> -40px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>118<span class="token punctuation">,</span> 25<span class="token punctuation">,</span> 172<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px 15px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.social-info img</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><p>如下效果：</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211210002314.png" alt="image-20211210002312627"></p> <p>我设计了四个提示，分别是成功绿色，提示灰色，警告黄色，错误红色。而提示语前面的图标，需要自己去阿里云的矢量库进行获取，并在首页引用，<a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer">矢量库跳转<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="_404部署"><a href="#_404部署" class="header-anchor">#</a> 404部署</h2> <p>你喜欢 Nginx 自带的 404 页面吗？我可能不是特别喜欢，所以我们可以自定义好看的 404 页面，又或者去网上下载别人做好的 404 页面模板。如我的 404 页面如图：</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211210002748.png" alt="image-20211210002746928"></p> <p>点击头像还能播放音乐。</p> <p>利用 <code>xftp</code> 将 404 页面上传到服务器上，我在 Nginx 根目录下创建了一个 404 文件夹，将 404 页面和其 CSS 和 JS 文件放到这个 404 文件夹里。</p> <p>目录结构：</p> <div class="language-md line-numbers-mode"><pre class="language-md"><code>根目录
|—— 404（这是个目录）
│   ├── 404.html（ 404 页面）
│   ├── css（样式目录）
│   ├── img（图片目录）
│   ├── js（JavaScript 目录）
|	├── music（音乐目录）
|
├── index.html（其他页面）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>上传后到 Nginx 后，养成好习惯，打开 404.html，修改 CSS、JS 文件的引入路径，因为 Nginx 的获取资源规则和本地的不一样。</p> <p>记得开头加 <code>/</code>，改为：（部分）</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/404/css/ghost.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/404/js/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后在配置文件修改 404 页面的访问路径</p> <div class="language-nginx line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">431</span></span><span class="token punctuation">;</span>		<span class="token comment"># 431 是 https 的默认端口，80 是 http 的默认端口</span>
    <span class="token directive"><span class="token keyword">server_name</span> youngkbt.cn</span><span class="token punctuation">;</span>
    <span class="token comment"># ...... 其他 location</span>
    
    <span class="token directive"><span class="token keyword">error_page</span>   <span class="token number">404</span> <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /404.html</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> = /404.html</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span>    /usr/local/openresty/nginx/html/404</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">index</span> 404.html</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment"># ...... 其他 location</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>此时你随便访问我的服务器地址，如 <code>https://www.youngkbt.cn/aaa</code> 那么就会显示我的 404 页面。在该页面中，点击我的头像后，音乐会伴随头像的旋转而缓缓响起，静静享受 404 带有的静谧时刻。</p> <h2 id="博客部署"><a href="#博客部署" class="header-anchor">#</a> 博客部署</h2> <p>我的博客已经部署在 Github 和 Gitee 中，如果你看了上一个文章，部署自己的博客到了服务器，那么就请在 Nginx 设置一个 location 模块，进行跳转吧。</p> <p>我设置了两个 location 模块，当输入 <code>/notes</code> 或者 <code>/note-blog</code> 的时候，都会跳转到我的博客首页</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /notes</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">rewrite</span> ^/notes/(\w*)$ /notes-blog/<span class="token variable">$1</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token directive"><span class="token keyword">location</span> /notes-blog</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /home/kbt</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>实际上，最终都会跳到 <code>/note-blog</code> 的 location 模块里。</p> <p>我们不仅可以设置博客的 location，也可以设置浏览器的缓存静态文件时间，因为博客的静态文件太多，当用户每次访问都从 Nginx 服务器获取静态文件，那显然不理智，我们可以让用户访问过的静态文件，缓存到用户的浏览器中，这样，用户再次访问博客的时候，直接从浏览器本地获取，打开的速度非常快。</p> <p>我设置了静态文件缓存 7 天，html 文件缓存 1 天</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ~ /note-blog/.*\.(js|css|png|jpg|jpeg|gif)$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /home/kbt</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">expires</span> <span class="token number">7d</span></span><span class="token punctuation">;</span>  <span class="token comment"># 缓存七天</span>
<span class="token punctuation">}</span>

<span class="token directive"><span class="token keyword">location</span> ~ /note-blog/.*\.(html)$</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">root</span> /home/kbt</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">expires</span> <span class="token number">1d</span></span><span class="token punctuation">;</span>  <span class="token comment"># 缓存一天</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>看到 root 了吗，我的博客并没有放在 Nginx 的默认路径下，而是由普通用户 kbt 管理。防止滥用 root 权限，避免被别人恶意访问。</p> <h2 id="邮箱部署"><a href="#邮箱部署" class="header-anchor">#</a> 邮箱部署</h2> <p>建议你看到这里马上停住，然后点击 <a href="https://www.youngkbt.cn/?contact=1" target="_blank" rel="noopener noreferrer">测试发送邮箱<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，输入你的邮箱，进行发送，体验之后再来学习，会有更大的收获和兴趣。</p> <p>邮箱项目我使用了 node 和 express 来搭建简单的服务器，然后利用 nodemailer 进行邮件发送，log4j.js 进行日志信息存储。</p> <p>这是一个 node 简单项目，安装的依赖只有三个，express、nodemailer、log4js。</p> <h3 id="邮箱源码"><a href="#邮箱源码" class="header-anchor">#</a> 邮箱源码</h3> <p>我的 package.json 文件内容如下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node app.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;express&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;log4js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.3.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nodemailer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.7.2&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>依赖只有三个，如何安装呢，我使用 yarn 进行安装。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> express <span class="token parameter variable">--save</span>
<span class="token function">yarn</span> <span class="token function">add</span> log4js <span class="token parameter variable">--save</span>
<span class="token function">yarn</span> <span class="token function">add</span> nodemailer <span class="token parameter variable">--save</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>安装完，我们先编写 log.js 文件，实现日志功能</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 引入插件 log4js  </span>
<span class="token keyword">var</span> log4js <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'log4js'</span><span class="token punctuation">)</span>
log4js<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">appenders</span><span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token comment">// 配置日志文件</span>
        <span class="token literal-property property">access</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token comment">// 访问日志的 name</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>     
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;logs/access.log&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'pattern'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token string">'[%d{yyyy-MM-dd hh:mm:ss SSS}] [%p] %c - %m'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token comment">// 错误日志的 name</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;logs/error.log&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">// 定义日志输出的样式</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'pattern'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token string">'[%d{yyyy MM dd hh:mm:ss SSS}] [%p] %c - %m%n'</span> <span class="token comment">// 日志输出时间格式</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">categories</span><span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token comment">// 配置日志级别，以及引用 appenders 配置的日志文件</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">appenders</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'access'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">'info'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 上方 appenders 的 name</span>
        <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">appenders</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">'error'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">logger</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// name 取 categories 的 name</span>
    <span class="token keyword">return</span> log4js<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>name <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">use</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> logger</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>log4js<span class="token punctuation">.</span><span class="token function">connectLogger</span><span class="token punctuation">(</span>logger <span class="token operator">||</span> log4js<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">'info'</span><span class="token punctuation">,</span> <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">'请求类型/URI：「 :method:url 」'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 请求类型/URI 格式设置</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>文件内容不难理解，我们首先配置要输出的日志文件路径以及名字，然后配置日志输出的信息时间格式，然后配置日志的格式，如 info 或者 error，接着配置请求类型/URI 格式，最后暴露出去。</p> <p>日志的输出内容如图所示：</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211209232719.png" alt="image-20211209232718400"></p> <p>编写 route.js 文件，相信学过 express 的伙伴已经非常熟悉了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 引入日志</span>
<span class="token keyword">const</span> logger <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> errLogger <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logger</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 引入邮件发送功能</span>
<span class="token keyword">var</span> nodemailer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'nodemailer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/email&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
    <span class="token comment">// 获取发送的模板</span>
    <span class="token keyword">const</span> myHtml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./email/emailHtml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">myHtml</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> otherHtml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./email/emailHtml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">otherHtml</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建连接</span>
    <span class="token keyword">var</span> transporter <span class="token operator">=</span> nodemailer<span class="token punctuation">.</span><span class="token function">createTransport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&quot;smtp.163.com&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">465</span><span class="token punctuation">,</span> <span class="token comment">// SMTP 端口</span>
        <span class="token literal-property property">secureConnection</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 使用 SSL 方式（安全方式，防止被窃取信息）</span>
        <span class="token literal-property property">auth</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'kele_bingtang@163.com'</span><span class="token punctuation">,</span>
            <span class="token comment">// 这里密码不是 qq 密码，是你设置的 smtp 密码</span>
            <span class="token literal-property property">pass</span><span class="token operator">:</span> <span class="token string">'GJQDWNWVGYEVTSMB'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 邮件参数（我的）</span>
    <span class="token keyword">var</span> myOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token string">'kele_bingtang@163.com'</span><span class="token punctuation">,</span> <span class="token comment">// 发件地址</span>
        <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token string">'kele_bingtang@163.com,2456019588@qq.com'</span><span class="token punctuation">,</span> <span class="token comment">// 收件列表</span>
        <span class="token literal-property property">subject</span><span class="token operator">:</span> data<span class="token punctuation">.</span>subject<span class="token punctuation">,</span> <span class="token comment">// 标题</span>
        <span class="token comment">// text 和 html 同时发送只支持一种</span>
        <span class="token literal-property property">html</span><span class="token operator">:</span> myHtml<span class="token punctuation">,</span>

        <span class="token comment">//  text: &quot;测试&quot;,</span>
        <span class="token comment">/*  attachments:[{  // 附件
       filename: '',   // 附件名
       path: ''    // 附件路径
     }] */</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 邮件参数（发件人）</span>
    <span class="token keyword">var</span> otherOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">from</span><span class="token operator">:</span> <span class="token string">'kele_bingtang@163.com'</span><span class="token punctuation">,</span> <span class="token comment">// 发件地址</span>
        <span class="token literal-property property">to</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">kele_bingtang@163.com,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 收件列表</span>
        <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">&quot;Young Kbt 的致谢&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 标题</span>
        <span class="token comment">// text 和 html 同时发送只支持一种</span>
        <span class="token literal-property property">html</span><span class="token operator">:</span> otherHtml<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 发送邮件（给发件人）</span>
    transporter<span class="token punctuation">.</span><span class="token function">sendMail</span><span class="token punctuation">(</span>otherOptions<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            errLogger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;发送给「 &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; 」失败，原因：「 &quot;</span> <span class="token operator">+</span> error <span class="token operator">+</span> <span class="token string">&quot; 」&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;error：&quot;</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;发送给「 &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; 」成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;发送给发件人的响应信息：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">// 发送邮件（给我）</span>
    transporter<span class="token punctuation">.</span><span class="token function">sendMail</span><span class="token punctuation">(</span>myOptions<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;错误信息：&quot;</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            errLogger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;发送给「 Young Kbt 」失败，原因：「 &quot;</span> <span class="token operator">+</span> error <span class="token operator">+</span> <span class="token string">&quot; 」&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;error：&quot;</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;发件邮箱：「 &quot;</span> <span class="token operator">+</span> info<span class="token punctuation">.</span>envelope<span class="token punctuation">.</span>from <span class="token operator">+</span> <span class="token string">&quot; 」，收件邮箱：「 &quot;</span> <span class="token operator">+</span> info<span class="token punctuation">.</span>envelope<span class="token punctuation">.</span>to <span class="token operator">+</span> <span class="token string">&quot; 」&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;响应结果：「 &quot;</span> <span class="token operator">+</span> info<span class="token punctuation">.</span>response <span class="token operator">+</span> <span class="token string">&quot; 」&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;发送给我的响应信息：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;发件人：「 &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; 」，发件人的邮箱：「 &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>email <span class="token operator">+</span> <span class="token string">&quot; 」，发件主题：「 &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>subject <span class="token operator">+</span> <span class="token string">&quot; 」，发件消息：「 &quot;</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>message <span class="token operator">+</span> <span class="token string">&quot; 」&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;发送一次邮件的日志分割线 ------------------------\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        transporter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br></div></div><p>第 12 和 13 行引用自定义的邮件页面模板，模板大家根据自己的需求设计邮件页面。</p> <p>我的邮件页面代码位于根目录下的 <code>email</code> 目录，名字叫 emailHtml，源码为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 发送给我</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">myHtml</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div style=&quot;width: 600px;margin: 0 auto;&quot;&gt;
            &lt;includetail&gt;
              &lt;table style=&quot;text-align: center; font-size: 16px; color: #333333; border-spacing: 0px; border-collapse: collapse; width: 580px; direction: ltr&quot;&gt;
                  &lt;tbody&gt;
                  &lt;tr&gt;
                      &lt;td style=&quot;font-size: 14px; padding: 0px 0px 7px 0px; text-align: center;color: #0044CC&quot;&gt;
                          </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 在 Young Kbt 首页发送给您
                      &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr style=&quot;background-color: #2279BD&quot;&gt;
                      &lt;td style=&quot;padding: 0px&quot;&gt;
                          &lt;table style=&quot;border-spacing: 0px; border-collapse: collapse; width: 100%&quot;&gt;
                              &lt;tbody&gt;
                              &lt;tr&gt;
                                  &lt;td style=&quot;padding: 0px; text-align: center;&quot;&gt;
                                      &lt;img src=&quot;https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/user/20211205131212.jpg&quot; alt=&quot;请在上方选择信任，以此显示头像&quot;&gt;
                                  &lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                  &lt;td style=&quot;font-size: 38px; color: #FFFFFF; padding: 12px 22px 4px 22px; text-align: center;&quot; colspan=&quot;3&quot;&gt;
                                      Young Kbt
                                  &lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;tr&gt;
                                  &lt;td style=&quot;font-size: 20px; color: #FFFFFF; padding: 0px 22px 18px 22px; text-align: center;&quot; colspan=&quot;3&quot;&gt;
                                    人闲车马慢，路遥星亦辞
                                  &lt;/td&gt;
                              &lt;/tr&gt;
                              &lt;/tbody&gt;
                          &lt;/table&gt;
                      &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                      &lt;td style=&quot;background-color: #5BA9DF; border-bottom-style: solid; border-bottom-color: #2279BD; border-bottom-width: 4px;&quot;&gt;
                          &lt;table style=&quot;color: #333333; border-spacing: 0px; border-collapse: collapse; width: 100%; color: #fff&quot;&gt;
                              &lt;tbody&gt;
                                &lt;tr&gt;
                                  &lt;td style=&quot;font-size: 18px; padding: 0px 0px 5px 0px;&quot;&gt;
                                    &lt;p style=&quot;text-align: center&quot;&gt;
                                      &lt;span style=&quot;font-weight:bold;&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/span&gt;
                                      &lt;span&gt;发送的主题：&lt;/span&gt;&lt;/p&gt;
                                      &lt;p style=&quot;font-size: 16px; letter-spacing: 0.5px; text-indent: 16px; padding:0 20px; line-height: 30px; text-align: left;&quot;&gt;
                                      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>subject<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                                    &lt;/p&gt;
                                  &lt;/td&gt;
                                &lt;/tr&gt;
                                &lt;tr&gt;
                                  &lt;td style=&quot;font-size: 18px; padding: 0px 0px 5px 0px;&quot;&gt;
                                    &lt;p style=&quot;text-align: center; margin-top: 0;&quot;&gt;
                                      &lt;span style=&quot;font-weight:bold;&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &lt;/span&gt;
                                      &lt;span&gt;发送的内容：&lt;/span&gt;
                                    &lt;/p&gt;
                                      &lt;p style=&quot;font-size: 16px;letter-spacing: 0.5px; text-indent: 16px; padding:0 20px; line-height: 30px; text-align: left;&quot;&gt;
                                      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                                    &lt;/p&gt;
                                  &lt;/td&gt;
                                &lt;/tr&gt;	
                                &lt;tr&gt;
                                    &lt;td style=&quot;font-size: 16px; padding: 30px 20px; text-align: center&quot;&gt;
                                      如果您希望回复他/她，请发送到他/她的邮箱：
                                      &lt;p style=&quot;color: #0044CC; font-weight: bold&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
                                    &lt;/td&gt;
                                &lt;/tr&gt;
                              &lt;/tbody&gt;
                          &lt;/table&gt;
                      &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                      &lt;td style=&quot;padding: 35px 0px; color: #B2B2B2; font-size: 12px&quot;&gt;
                          From Young Kbt
                          &lt;br&gt;
                          This is a WebSite
                          &lt;br&gt;
                          </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">13</span> <span class="token operator">?</span> <span class="token number">12</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                            </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                      &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                      &lt;td style=&quot;padding: 0px 0px 10px 0px; color: #B2B2B2; font-size: 12px&quot;&gt;
                          Copyright Young Kbt WebSite             
                      &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;/includetail&gt;
          &lt;/div</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 发送给发件人</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">otherHtml</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div style=&quot;width: 600px;margin: 0 auto;&quot;&gt;
            &lt;includetail&gt;
              &lt;table
                style=&quot;text-align: center; font-size: 16px; color: #333333; border-spacing: 0px; border-collapse: collapse; width: 580px; direction: ltr&quot;&gt;
                &lt;tbody&gt;
                  &lt;tr&gt;
                    &lt;td style=&quot;font-size: 14px; padding: 0px 0px 7px 0px; text-align: center;color: #0044CC&quot;&gt;
                      尊敬的 &lt;span style=&quot;font-weight: bold;&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;，Young Kbt 感谢您的邮件
                    &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr style=&quot;background-color: #2279BD&quot;&gt;
                    &lt;td style=&quot;padding: 0px&quot;&gt;
                      &lt;table style=&quot;border-spacing: 0px; border-collapse: collapse; width: 100%&quot;&gt;
                        &lt;tbody&gt;
                          &lt;tr&gt;
                            &lt;td style=&quot;padding: 0px; text-align: center;&quot;&gt;
                              &lt;img src=&quot;https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/user/20211205131212.jpg&quot; alt=&quot;请在上方选择信任，以此显示头像&quot;&gt;
                            &lt;/td&gt;
                          &lt;/tr&gt;
                          &lt;tr&gt;
                            &lt;td style=&quot;font-size: 38px; color: #FFFFFF; padding: 12px 22px 4px 22px; text-align: center;&quot;
                              colspan=&quot;3&quot;&gt;
                              Young Kbt
                            &lt;/td&gt;
                          &lt;/tr&gt;
                          &lt;tr&gt;
                            &lt;td style=&quot;font-size: 20px; color: #FFFFFF; padding: 0px 22px 18px 22px; text-align: center;&quot;
                              colspan=&quot;3&quot;&gt;
                              人闲车马慢，路遥星亦辞
                            &lt;/td&gt;
                          &lt;/tr&gt;
                        &lt;/tbody&gt;
                      &lt;/table&gt;
                    &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td
                      style=&quot;background-color: #5BA9DF; border-bottom-style: solid; border-bottom-color: #2279BD; border-bottom-width: 4px;&quot;&gt;
                      &lt;table style=&quot;color: #333333; border-spacing: 0px; border-collapse: collapse; width: 100%; color: #fff&quot;&gt;
                        &lt;tbody&gt;
                          &lt;tr&gt;
                            &lt;td style=&quot;font-size: 18px; padding: 0px 0px 5px 0px;&quot;&gt;
                              &lt;p style=&quot;text-align: center&quot;&gt;
                                &lt;span style=&quot;font-weight:bold&quot;&gt;Young Kbt&lt;/span&gt;
                                &lt;span&gt;提示您：&lt;/span&gt;
                              &lt;/p&gt;
                              &lt;p
                                style=&quot;font-size: 16px; letter-spacing: 0.5px; text-indent: 32px; padding:0 20px; line-height: 30px; text-align: left;&quot;&gt;
                                本邮件由 Young Kbt's index 网站发送给您，
                                &lt;span style=&quot;color: #1546a8; font-weight: bold;&quot;&gt;如果非本人操作，请忽略即可。&lt;/span&gt;
                              &lt;/p&gt;
                            &lt;/td&gt;
                          &lt;/tr&gt;
                          &lt;tr&gt;
                            &lt;td style=&quot;font-size: 18px; padding: 0px 0px 5px 0px;&quot;&gt;
                              &lt;p style=&quot;text-align: center; margin-top: 0;&quot;&gt;
                                &lt;span style=&quot;font-weight:bold&quot;&gt;Young Kbt&lt;/span&gt;
                                &lt;span&gt;回复您：&lt;/span&gt;
                              &lt;/p&gt;
                              &lt;p
                                style=&quot;font-size: 16px;letter-spacing: 0.5px; text-indent: 32px; padding:0 20px; line-height: 30px; text-align: left;&quot;&gt;
                                感谢您提供的宝贵消息，我会根据您的内容尽快回复您，如果时间较延迟，请您见谅。
                              &lt;/p&gt;
                            &lt;/td&gt;
                          &lt;/tr&gt;
                          &lt;tr&gt;
                            &lt;td style=&quot;font-size: 16px; padding: 30px 20px; text-align: center&quot;&gt;
                              如果您对我的网站感兴趣，请访问：
                              &lt;p style=&quot;color: #0044CC; font-weight: bold&quot;&gt;
                               &lt;a href=&quot;youngkbt.cn&quot; style=&quot;color: #0044CC; text-decoration: none&quot;&gt;youngkbt.cn&lt;/a&gt;
                              &lt;/p&gt;
                              &lt;p style=&quot;color: #0c3388;font-size: 14px; margin: 15px 0 0 0;&quot;&gt;本网站仅是个人使用，并不带有商业用途&lt;/p&gt;
                            &lt;/td&gt;
                          &lt;/tr&gt;
                        &lt;/tbody&gt;
                      &lt;/table&gt;
                    &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td style=&quot;padding: 35px 0px; color: #B2B2B2; font-size: 12px&quot;&gt;
                      From Young Kbt
                      &lt;br&gt;
                      This is a WebSite
                      &lt;br&gt;
                      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">13</span> <span class="token operator">?</span> <span class="token number">12</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span>
    <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span>
    <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span>
    <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                    &lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td style=&quot;padding: 0px 0px 10px 0px; color: #B2B2B2; font-size: 12px&quot;&gt;
                      Copyright Young Kbt WebSite
                    &lt;/td&gt;
                  &lt;/tr&gt;
                &lt;/tbody&gt;
              &lt;/table&gt;
            &lt;/includetail&gt;
          &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br></div></div><p>编写 express 的入口文件 app.js，监听 5678 端口</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./router&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> log <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./log&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

log<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token parameter">request <span class="token punctuation">,</span> response <span class="token punctuation">,</span> next</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span> <span class="token string">'Access-Control-Allow-Origin'</span> <span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span> <span class="token comment">// 跨域最重要的一步 设置响应头</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行 next 函数执行后续代码</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span>router<span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'5678'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;5678 端口的服务器启动成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>写完邮箱的功能，我们可以进行测试，进入邮箱项目的根目录，使用 <code>node app.js</code> 启动 node 项目。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">node</span> app.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>因为是 POST 请求，所以使用 Postman 等工具进行测试，访问 <code>localhost:5678/email</code>，填写 JSON 格式，包含 name、email、subject、message 四个参数的数据即可。</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211210005340.png" alt="image-20211210005339569"></p> <h3 id="官方镜像部署"><a href="#官方镜像部署" class="header-anchor">#</a> 官方镜像部署</h3> <p>在本地编写测试完邮箱的功能后，我们将其上传到服务器，我上传的目录是 <code>docker/node/email</code> 下，然后需要服务器安装 node 环境，我使用的是 docker，所以直接拉取 node。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> pull <span class="token function">node</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>下载完 node 镜像后，不要马上启动它，因为 node 项目需要执行打包命令，生成 node_modules 目录，所以使用 Dockerfile 文件来执行打包命令。</p> <p>在 <code>docker/node/email</code> 目录下，创建并编写 Dockerfile 文件</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> docker/node/email
<span class="token function">vim</span> Dockerfile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>添加如下内容：</p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> node					# 基于 node 镜像创建新的镜像</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /home/email			# 创建默认工作目录</span>
<span class="token instruction"><span class="token keyword">COPY</span> . /home/email			# 将当前目录的所有内容拷贝到容器中</span>
<span class="token instruction"><span class="token keyword">RUN</span> npm i					# 执行打包命令</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 5678					# 暴露 5678 端口</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> node ./app.js 	# 启动容器时，启动 app.js 文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>不难看出，在生成 docker 镜像的同时，它会将当前目录下的所有内容拷贝到容器中，这些内容就是我们写的邮箱项目。接着它会执行打包命令 <code>npm i</code>，i 代表 install。然后暴露 5678 端口，最后在启动的时候，启动 app.js 文件，也就是执行项目。</p> <p>写好 Dockerfile 文件，我们执行这个文件，构建基于 node 环境而搭建的「邮箱发送」镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> build <span class="token parameter variable">-t</span> email:1.0 <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动这个名叫 email、版本为 1.0 的容器，当启动这个容器的时候，内部就会执行 <code>node ./app.js</code> 命令，也就是 Dockerfile 文件的 ENTRYPOINT 指令，部署项目。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> email <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /docker/node/email/router.js:/home/email/router.js <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /docker/node/email/app.js:/home/email/app.js <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /docker/node/email/log.js:/home/email/log.js <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /docker/node/email/logs:/home/email/logs <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /docker/node/email/email:/home/email/email <span class="token punctuation">\</span>
<span class="token parameter variable">--network</span> web --network-alias email <span class="token punctuation">\</span>
email:1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>不要惊讶会有那么多启动命令，这里主要实现挂载功能，只要宿主机的文件发生改变，则容器内的文件也会同步改变，毕竟谁也无法确定自己写的文件以后都不会修改，对吧。</p> <p>至于第 7 行的 <code>network</code> 网络，因为 Nginx 所处的网络是 web 网络，而想让 Nginx 访问 node 项目，则需要让两者处于同一个网络上。 <code>network-alias</code> 是网络别名，Nginx 会根据这个网络别名找到处于相同网络下的 node 项目，尽量与容器名保持一致。</p> <p>此时邮箱项目已经部署成功了，但是 Nginx 还无法访问这个邮箱项目，因为我们没有配置 location 模块来访问邮箱项目。</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">5678</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /email</span> <span class="token punctuation">{</span>
	    <span class="token directive"><span class="token keyword">proxy_pass</span> http://email:5678</span><span class="token punctuation">;</span>    <span class="token comment"># email 就是网桥别名，Nginx 通过它找到 email 容器</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>实际上我并没有直接将上面的 server 模块放在配置文件里，而是将上面的内容放在新创建的 email_5678.conf 文件里，然后在配置文件进行转发。</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211210005925.png" alt="image-20211210005924513"></p> <p>因为核心配置文件使用了 include 指令将 conf 目录下的所有 .conf 文件引入，所以我们只需要创建新的配置文件 email_5678.conf 即可。</p> <p>然后新的配置文件添加如下内容：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">431</span></span><span class="token punctuation">;</span>		<span class="token comment"># 431 是 https 的默认端口，80 是 http 的默认端口</span>
    <span class="token directive"><span class="token keyword">server_name</span> www.youngkbt.cn</span><span class="token punctuation">;</span>
    <span class="token comment"># ...... 其他 location</span>

    <span class="token comment"># 转发给其他的 conf 文件</span>
    <span class="token directive"><span class="token keyword">location</span> /email</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_pass</span> http://localhost:5678</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># ...... 其他 location</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>当访问 <code>/email</code> 的时候，触发 431 端口的的 <code>/email</code>，然后内部就会执行 <code>proxy_pass</code> 指令，将请求转发给本地的 5678 端口，此时 email_5678.conf 文件正好监听这个 5678 端口，所以就会将 <code>/email</code> 请求发给自己的 location ，执行新的 <code>proxy_pass</code> 指令，而这个指令才是将请求发给 node 邮箱项目，触发邮箱的发送。</p> <p>记得重启 Ngixn，使得配置文件生效。</p> <p><strong>什么时候外界会访问 <code>/email</code>？</strong></p> <p>自己写一个 &lt;a&gt; 标签，填写你的服务器的地址加上 <code>/email</code> 即可。</p> <p>我自己写的不是 &lt;a&gt; 标签，而是一个 js 文件，点击按钮触发 ajax 请求，具体源码请看 <a href="#%E9%A6%96%E9%A1%B5%E9%83%A8%E7%BD%B2">首页部署</a> 的 <strong>JS 文件</strong>。</p> <h3 id="自定义镜像部署"><a href="#自定义镜像部署" class="header-anchor">#</a> 自定义镜像部署</h3> <p>我在使用了基于官方镜像的部署几天后，发现这个镜像太大了，有 999MB，如图：</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211217011316.png" alt="img"></p> <p>于是我打算基于 Centos7.9 构建一个 node 环境的镜像，这里提供 Dockerfile 文件内容：</p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token comment"># 这是早期的版本，直接引入 node 镜像，但是该镜像太大了，构建后 999MB，所以我就自己创建一个 nodejs 镜像</span>
<span class="token comment"># FROM node  </span>
<span class="token instruction"><span class="token keyword">FROM</span> centos:7.9</span>

<span class="token comment"># nodejs 版本</span>
<span class="token instruction"><span class="token keyword">ARG</span> NODE_VERSION=<span class="token string">&quot;v16.13.1&quot;</span></span>

<span class="token instruction"><span class="token keyword">WORKDIR</span> /opt/sendEmail</span>
<span class="token comment"># 将当前目录的所有文件放入容器的 /opt/sendEmail</span>
<span class="token instruction"><span class="token keyword">COPY</span> . /opt/sendEmail</span>

<span class="token comment"># 因为 COPY 也会将当前的 nodejs 压缩包添加进入，所以可以删除掉</span>
<span class="token instruction"><span class="token keyword">RUN</span> rm -f /opt/sendEmail/node-<span class="token variable">${NODE_VERSION}</span>-linux-x64.tar.xz</span>

<span class="token comment"># ------ 二选一，可注释 ------</span>
<span class="token comment"># 如果事先下载的 node 压缩包，则放入 Dockerfile 所在的目录下，利用 ADD 传入并自动解压</span>
<span class="token instruction"><span class="token keyword">ADD</span> node-<span class="token variable">${NODE_VERSION}</span>-linux-x64.tar.xz /usr/local/</span>
<span class="token comment"># ADD 指令自动解压，所以可以删除传入的压缩包</span>
<span class="token instruction"><span class="token keyword">RUN</span> rm -f /usr/local/node-<span class="token variable">${NODE_VERSION}</span>-linux-x64.tar.xz</span>
<span class="token comment"># ------ ------ ------ ------ ------ ------ ------ ------ ------ ------</span>

<span class="token comment"># ------ 二选一，可注释 ------</span>
<span class="token comment"># 如果想要远程下载 node 压缩包，则取消下面的 RUN 指令注释</span>
<span class="token comment">#RUN yum install -y wget tar \</span>
<span class="token comment">#     &amp;&amp; cd /usr/local/ \</span>
<span class="token comment">#     &amp;&amp; wget https://nodejs.org/dist/${NODE_VERSION}/node-${NODE_VERSION}-linux-x64.tar.xz \</span>
<span class="token comment">#     &amp;&amp; tar xvf node-${NODE_VERSION}-linux-x64.tar.xz \</span>
<span class="token comment">#     &amp;&amp; rm -f node-${NODE_VERSION}-linux-x64.tar.xz</span>
<span class="token comment"># ------ ------ ------ ------ ------ ------ ------ ------ ------ ------</span>

<span class="token comment"># 将解压的 node 目录重命名</span>
<span class="token instruction"><span class="token keyword">RUN</span> cd /usr/local/ <span class="token operator">\</span>
     &amp;&amp; mv node-<span class="token variable">${NODE_VERSION}</span>-linux-x64 node</span>

<span class="token comment"># 将 node 命令添加至全局变量，包括了 node 和 npm</span>
<span class="token instruction"><span class="token keyword">ENV</span> PATH=<span class="token variable">$PATH</span>:/usr/local/node/bin</span>

<span class="token comment"># 安装依赖包</span>
<span class="token instruction"><span class="token keyword">RUN</span> cd /opt/sendEmail <span class="token operator">\</span>
     &amp;&amp; npm install</span>

<span class="token comment"># 暴露 7272 端口</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 7272</span>
<span class="token comment"># 启动容器后，自动执行下面的命令来启动项目</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> node ./app.js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>我都有注释说明，这里大概总结下：</p> <p>基于 Centos7.9 系统搭建 node 镜像，首先下载 nodejs，传到与 Dockerfile 同目录下，然后执行 Dockerfile 的时候，将 nodejs 传入镜像里，自动解压，并将 <code>node</code> 和 <code>npm</code> 命令添加至全局变量，然后把邮箱项目的代码传入镜像，接着利用全局变量 <code>npm</code> 进行安装 <code>nodes_modules</code>，最后写 <code>ENTRYPOINT</code> 指令，该指令会在启动容器的时候自动启动项目，这样就不需要我们亲自进入容器里启动项目。</p> <p>如果不喜欢先下载 nodejs，传入服务器里，那么就在构建容器时使用 <code>wget</code> 下载即可，上面内容的注释就是 <code>wget</code> 相关操作，二选一。</p> <p>执行如下命令执行 Dockerfile，构建镜像：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">docker</span> build <span class="token parameter variable">-t</span> email:2.0 <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到构建的新镜像大小已经缩小一半左右，并且功能没有任何缺失，如图：</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/%E5%85%B3%E4%BA%8E/%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99/20211217012127.png" alt="img"></p> <p>2.0 版本的邮箱镜像构建源码我已经放到下载站点里了，如果需要，我在上方提供了下载地址，点击 <a href="#%E5%BA%8F%E8%A8%80">序言</a> 直达。</p> <h2 id="消息提示效果代码"><a href="#消息提示效果代码" class="header-anchor">#</a> 消息提示效果代码</h2> <p>在发送邮箱的过程，如果没有填写一些必要的信息，则会被提示，首页的提示是仿照 Element UI，只有两个函数，使用起来非常简单：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 添加消息提示
 * content：内容
 * type：弹窗类型（tip、success、warning、danger）
 * startHeight：第一个弹窗的高度，默认 50
 * dieTime：弹窗消失时间（毫秒），默认 3000 毫秒
 */</span>
<span class="token keyword">function</span> <span class="token function">addTip</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> type<span class="token punctuation">,</span> startHeight <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span> dieTime <span class="token operator">=</span> <span class="token number">3000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> tip <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.tip&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取最后消息提示元素的高度</span>
  <span class="token keyword">var</span> top <span class="token operator">=</span> tip<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> tip<span class="token punctuation">[</span>tip<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果产生两个以上的消息提示，则出现在上一个提示的下面，即高度添加，否则默认 50</span>
  <span class="token keyword">var</span> lastTop <span class="token operator">=</span>
    <span class="token function">parseInt</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span> <span class="token operator">+</span>
    <span class="token punctuation">(</span>tip<span class="token punctuation">.</span>length <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">?</span> tip<span class="token punctuation">[</span>tip<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetHeight <span class="token operator">+</span> <span class="token number">17</span> <span class="token operator">:</span> startHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">tip tip-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>top<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-top&quot;</span><span class="token punctuation">,</span> lastTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;info&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;i class=&quot;iconfont icon-info icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-info-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;success&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;i class=&quot;iconfont icon-dagouyouquan icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-success-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;danger&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;i class=&quot;iconfont icon-cuowu icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-danger-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token string">&quot;warning&quot;</span> <span class="token operator">||</span> type <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;i class=&quot;iconfont icon-gantanhao icon&quot;&gt;&lt;/i&gt;&lt;p class=&quot;tip-warning-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> timeTip <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timeTip<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>lastTop<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    timeTip<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 消息提示 dieTime 秒后隐藏并被删除</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timeTip<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">;</span>
    timeTip<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 下面的所有元素回到各自曾经的出发点</span>
    <span class="token keyword">var</span> allTipElement <span class="token operator">=</span> <span class="token function">nextAllTipElement</span><span class="token punctuation">(</span>timeTip<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> allTipElement<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> next <span class="token operator">=</span> allTipElement<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> top <span class="token operator">=</span>
        <span class="token function">parseInt</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> next<span class="token punctuation">.</span>offsetHeight <span class="token operator">-</span> <span class="token number">17</span><span class="token punctuation">;</span>
      next<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-top&quot;</span><span class="token punctuation">,</span> top<span class="token punctuation">)</span><span class="token punctuation">;</span>
      next<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      timeTip<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> dieTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * 获取后面的兄弟元素
 */</span>
<span class="token keyword">function</span> <span class="token function">nextAllTipElement</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> elem<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> n<span class="token punctuation">;</span> n <span class="token operator">=</span> n<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">!==</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><p>CSS 样式：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* 提示框元素 */</span>
<span class="token selector">.tip</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -10px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 320px<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.3s linear<span class="token punctuation">,</span> top 0.4s<span class="token punctuation">,</span> transform 0.4s<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 99999<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 15px 15px 15px 20px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ebeef5<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token property">grid-row</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip p</span> <span class="token punctuation">{</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.icon</span> <span class="token punctuation">{</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-success</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #67c23a<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f9eb<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #e1f3d8<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-success .tip-success-content</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #67c23a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-danger</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f56c6c<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fef0f0<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #fde2e2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-danger .tip-danger-content</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f56c6c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-info</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #edf2fc<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #ebeef5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-info .tip-info-content</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #909399<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-warning</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #e6a23c<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fdf6ec<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> #faecd8<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.tip-warning .tip-warning-content</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #e6a23c<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 21px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><p>图片是阿里云的图标库，在线地址：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//at.alicdn.com/t/font_3114978_qe0b39no76.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用只需要调用 <code>addTip</code> 即可：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> hours <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> minutes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> seconds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    hours <span class="token operator">=</span> hours <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> hours <span class="token operator">:</span> hours<span class="token punctuation">;</span>
    minutes <span class="token operator">=</span> minutes <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> minutes <span class="token operator">:</span> minutes<span class="token punctuation">;</span>
    seconds <span class="token operator">=</span> seconds <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> seconds <span class="token operator">:</span> seconds<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;=</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> hours <span class="token operator">&lt;</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">早上好呀~~，现在是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>seconds<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，吃早餐了吗？😊🤭</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span>
            <span class="token number">50</span><span class="token punctuation">,</span>
            <span class="token number">4000</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;=</span> <span class="token number">12</span> <span class="token operator">&amp;&amp;</span> hours <span class="token operator">&lt;=</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">下午好呀~~，现在是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>seconds<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，繁忙的下午也要适当休息哦🥤🏀~~</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span>
            <span class="token number">50</span><span class="token punctuation">,</span>
            <span class="token number">4000</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;=</span> <span class="token number">16</span> <span class="token operator">&amp;&amp;</span> hours <span class="token operator">&lt;=</span> <span class="token number">19</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">到黄昏了~~，现在是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>seconds<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，该准备吃饭啦🥗🍖~~</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span>
            <span class="token number">50</span><span class="token punctuation">,</span>
            <span class="token number">4000</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;=</span> <span class="token number">19</span> <span class="token operator">&amp;&amp;</span> hours <span class="token operator">&lt;</span> <span class="token number">24</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">晚上好呀~~，现在是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>seconds<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，该准备洗漱睡觉啦🥱😪~~</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span>
            <span class="token number">50</span><span class="token punctuation">,</span>
            <span class="token number">4000</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hours <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> hours <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">addTip</span><span class="token punctuation">(</span>
            <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">别再熬夜了~~，现在是 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hours<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>seconds<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，早点睡吧，让我们一起欣赏早上的太阳~~😇🛏</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span>
            <span class="token number">50</span><span class="token punctuation">,</span>
            <span class="token number">4000</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E9%A6%96%E9%A1%B5" title="标签">#首页</a></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2023/04/04, 21:10:44</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/about/website/global-tip/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">本站 - 全局时间提示模块</div></a> <a href="/about/index/download/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">首页 - 下载站点</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/about/website/global-tip/" class="prev">本站 - 全局时间提示模块</a></span> <span class="next"><a href="/about/index/download/">首页 - 下载站点</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c87550/"><div>
            变更Git作者邮箱信息
            <!----></div></a> <span class="date">02-11</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/08929e/"><div>
            大文件上传技术实现
            <!----></div></a> <span class="date">05-17</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/77f5b4/"><div>
            什么？后端要一次性返回我10万条数据！且看我这8种方案机智应对！
            <!----></div></a> <span class="date">11-01</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:wuwanming0405@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Ming-D-W" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/user/home?id=515874856" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2025
    <span>Ming | blog<br><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33019202000592" target="_blank" style="margin-right: 20px; height:20px;line-height:20px;"><img src="https://photo-album-1314189846.cos.ap-shanghai.myqcloud.com/202304131844613.png" style="height:18px; margin: 0px 5px 0px 0px;"/>浙公网安备 33019202000592号</a> <a href="http://beian.miit.gov.cn/" target="_blank">陇ICP备2023000815号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div class="fantasy"><canvas id="cvs" width="1980" height="1080" class="hidden"></canvas> <canvas id="screenImage" width="234" height="357" class="hidden"></canvas> <canvas id="rili" width="600" height="600" class="hidden"></canvas> <canvas id="display"></canvas></div><div></div><!----><div></div></div></div>
    <script src="/assets/js/app.9ce89328.js" defer></script><script src="/assets/js/2.f5951ee7.js" defer></script><script src="/assets/js/109.bb88a410.js" defer></script><script src="/assets/js/15.8f34ae65.js" defer></script><script src="/assets/js/5.80fa8520.js" defer></script><script src="/assets/js/9.a3a07a71.js" defer></script><script src="/assets/js/8.00efa629.js" defer></script>
  </body>
</html>
